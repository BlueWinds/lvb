#########
# Dairy #
#########

building_lvb_dairy_farm = {
	base_buildtime = @b1_time
	category = resource

	potential = {
		exists = owner
		owner = { is_gestalt = no }
		NOT = { has_modifier = resort_colony }
	}

	destroy_trigger = {
		OR = {
			owner = { is_gestalt = yes }
			planet = { has_modifier = resort_colony }
		}
	}

	resources = {
		category = planet_buildings
		cost = {
			minerals = @b1_minerals
		}
		upkeep = {
			energy = @b1_upkeep
		}
	}

	upgrades = {
		building_lvb_dairy_facility
	}

	planet_modifier = {
		job_lvb_milk_cow_add = 2
		planet_housing_add = 2
	}

	{{> cow_triggered_desc }}

	ai_weight = {
		weight = 0
		modifier = {
			weight = 25
			NOR = {
				has_building = building_factory_1
				has_building = building_factory_2
				has_building = building_factory_3
				has_building = building_lvb_dairy_farm
				has_building = building_lvb_dairy_facility
				has_building = building_lvb_dairy_arcology
			}
		}
		modifier = {
			weight = 100
			lvb_jobs_work_food_goods = no
			owner = {
				has_monthly_income = {
					resource = consumer_goods
					value < 30
				}
				OR = {
					country_uses_food = no
					has_monthly_income = {
						resource = food
						value >= 0
					}
					has_resource = {
						type = food
						amount > 0
					}
				} #Check to see if consumer goods shortage is being caused by a food shortage.
			}
		}
		modifier = {
			factor = 0
			free_jobs > 3
		}
	}

	ai_resource_production = {
		consumer_goods = 1
		trigger = {
			always = yes
		}
	}
}

building_lvb_dairy_facility = {		# Dairy Facility (upgrades from Dairy Farm)
	base_buildtime = @b2_time
	category = resource
	can_build = no

	prerequisites = {
		tech_lvb_cows_1
	}

	potential = {
		exists = owner
		owner = { is_gestalt = no }
		NOT = { has_modifier = resort_colony }
	}

	destroy_trigger = {
		OR = {
			owner = { is_gestalt = yes }
			planet = {
				OR = {
					has_modifier = resort_colony
					buildings_no_motes = yes
				}
			}
		}
	}

	allow = {
		has_upgraded_capital = yes
		buildings_upgrade_allow = yes
	}

	resources = {
		category = planet_buildings
		cost = {
			minerals = @b2_minerals
			volatile_motes = @b2_rare_cost
		}
		upkeep = {
			energy = @b2_upkeep
			volatile_motes = @b2_rare_upkeep
		}
	}

	upgrades = {
		building_lvb_dairy_arcology
	}

	planet_modifier = {
		job_lvb_milk_cow_add = 5
		planet_housing_add = 5
	}

	triggered_planet_modifier = {
		potential = {
			exists = owner
			owner = {
				has_tradition = tr_lvb_sexualization_hot_tanks
			}
		}
		modifier = {
			job_lvb_hot_tank_add = 1
			planet_housing_add = 1
		}
	}

	{{> cow_triggered_desc }}
	{{> hot_tank_triggered_desc }}

	ai_weight = {
		weight = 0
		modifier = {
			weight = 3
			buildings_has_motes = yes
		}
	}

	ai_resource_production = {
		consumer_goods = 1
		trigger = {
			always = yes
		}
	}
}

building_lvb_dairy_arcology = {		# Dairy Arcology (upgrades from Dairy Facility)
	base_buildtime = @b3_time
	category = resource
	can_build = no

	prerequisites = {
		tech_lvb_cows_2
	}

	potential = {
		exists = owner
		owner = { is_gestalt = no }
		NOT = { has_modifier = resort_colony }
	}

	destroy_trigger = {
		OR = {
			owner = { is_gestalt = yes }
			planet = {
				OR = {
					has_modifier = resort_colony
					buildings_no_motes = yes
				}
			}
		}
	}

	allow = {
		has_upgraded_capital = yes
		buildings_upgrade_allow = yes
	}

	resources = {
		category = planet_buildings
		cost = {
			minerals = @b3_minerals
			volatile_motes = @b3_rare_cost
		}
		upkeep = {
			energy = @b3_upkeep
			volatile_motes = @b3_rare_upkeep
		}
	}

	planet_modifier = {
		job_lvb_milk_cow_add = 8
		planet_housing_add = 8
	}

	triggered_planet_modifier = {
		potential = {
			exists = owner
			owner = {
				has_tradition = tr_lvb_sexualization_hot_tanks
			}
		}
		modifier = {
			job_lvb_hot_tank_add = 2
			planet_housing_add = 2
		}
	}

	{{> cow_triggered_desc }}
	{{> hot_tank_triggered_desc }}

	ai_weight = {
		weight = 0
		modifier = {
			weight = 3
			buildings_has_motes = yes
		}
	}

	ai_resource_production = {
		consumer_goods = 1
		trigger = {
			always = yes
		}
	}
}

###########
# Brothel #
###########

building_lvb_slave_brothel = {
	base_buildtime = 360
	base_cap_amount = 1

	category = government

	potential = {
		owner = { is_regular_empire = yes }
		owner = { has_policy_flag = slavery_allowed }
		any_owned_pop = { is_enslaved = yes }
	}

	allow = {
		has_upgraded_capital = yes
	}

	destroy_trigger = { # destroys if true
		OR = {
			owner = { is_regular_empire = no }
			NOT = { owner = { has_policy_flag = slavery_allowed } }
		}
	}

	planet_modifier = {}

	resources = {
		category = planet_buildings
		cost = {
			minerals = 400
		}
		upkeep = { energy = 2 }
	}

	prerequisites = {
		"tech_lvb_sex_trade"
	}

	ai_weight = {
		weight = 0
	}
}
